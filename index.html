<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flower Market - –°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 500px; margin: 0 auto; }
        .header { text-align: center; color: white; margin-bottom: 20px; }
        .header h1 { margin-bottom: 10px; }
        .form-container { background: white; border-radius: 15px; padding: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; color: #333; font-weight: bold; }
        input, textarea, select { width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 8px; font-size: 14px; }
        textarea { min-height: 100px; resize: vertical; }
        .btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 12px; border-radius: 8px; font-size: 16px; cursor: pointer; width: 100%; margin-top: 10px; }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .photo-preview { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 10px; }
        .photo-item { position: relative; width: 100%; aspect-ratio: 1; border-radius: 8px; overflow: hidden; }
        .photo-item img { width: 100%; height: 100%; object-fit: cover; }
        .remove-photo { position: absolute; top: 5px; right: 5px; background: red; color: white; width: 20px; height: 20px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; }
        .step { display: none; }
        .step.active { display: block; }
        .navigation { display: flex; gap: 10px; margin-top: 20px; }
        .navigation button { flex: 1; }
        .notification { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background: white; padding: 15px; border-radius: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.2); z-index: 1000; display: none; }
        .notification.show { display: block; }
        .notification.success { border-left: 5px solid green; }
        .notification.error { border-left: 5px solid red; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üå∏ Flower Market</h1>
            <p>–°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –æ –ø—Ä–æ–¥–∞–∂–µ —Ü–≤–µ—Ç–æ–≤</p>
        </div>
        
        <div class="notification" id="notification"></div>
        
        <div class="form-container">
            <!-- –®–∞–≥ 1: –û–ø–∏—Å–∞–Ω–∏–µ -->
            <div class="step active" id="step1">
                <h2>üìù –û–ø–∏—Å–∞–Ω–∏–µ</h2>
                <div class="form-group">
                    <label for="description">–û–ø–∏—à–∏—Ç–µ –≤–∞—à —Ç–æ–≤–∞—Ä:</label>
                    <textarea id="description" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –°–≤–µ–∂–∏–µ —Ä–æ–∑—ã –∏–∑ –≠–∫–≤–∞–¥–æ—Ä–∞, –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è —Å–≤–∞–¥–µ–±–Ω—ã—Ö –±—É–∫–µ—Ç–æ–≤. –î–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –≥–æ—Ä–æ–¥—É."></textarea>
                    <small>–ú–∏–Ω–∏–º—É–º 10 —Å–∏–º–≤–æ–ª–æ–≤</small>
                </div>
                <button class="btn" onclick="nextStep()">–î–∞–ª–µ–µ ‚Üí</button>
            </div>
            
            <!-- –®–∞–≥ 2: –¶–µ–Ω–∞ -->
            <div class="step" id="step2">
                <h2>üí∞ –¶–µ–Ω–∞</h2>
                <div class="form-group">
                    <label for="price">–¶–µ–Ω–∞ –≤ —Å–æ–º–∞—Ö:</label>
                    <input type="text" id="price" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 1500 –∏–ª–∏ –î–æ–≥–æ–≤–æ—Ä–Ω–∞—è">
                </div>
                <div class="navigation">
                    <button class="btn" onclick="prevStep()">‚Üê –ù–∞–∑–∞–¥</button>
                    <button class="btn" onclick="nextStep()">–î–∞–ª–µ–µ ‚Üí</button>
                </div>
            </div>
            
            <!-- –®–∞–≥ 3: –ö–æ–Ω—Ç–∞–∫—Ç—ã -->
            <div class="step" id="step3">
                <h2>üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
                <div class="form-group">
                    <label>–¢–∏–ø –∫–æ–Ω—Ç–∞–∫—Ç–∞:</label>
                    <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                        <button type="button" id="btnTelegram" onclick="selectContactType('telegram')" style="flex: 1; background: #0088cc; color: white; padding: 10px; border-radius: 8px; border: none; cursor: pointer;">
                            Telegram
                        </button>
                        <button type="button" id="btnPhone" onclick="selectContactType('phone')" style="flex: 1; background: #f0f0f0; color: #333; padding: 10px; border-radius: 8px; border: none; cursor: pointer;">
                            –¢–µ–ª–µ—Ñ–æ–Ω
                        </button>
                    </div>
                    <div id="phoneInput" style="display: none;">
                        <input type="tel" id="phone" placeholder="+996 XXX XXX XXX">
                    </div>
                    <div id="telegramInfo" style="background: #f5f5f5; padding: 10px; border-radius: 8px; margin-top: 10px; display: none;">
                        –ë—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –≤–∞—à Telegram username
                    </div>
                </div>
                <div class="navigation">
                    <button class="btn" onclick="prevStep()">‚Üê –ù–∞–∑–∞–¥</button>
                    <button class="btn" onclick="nextStep()">–î–∞–ª–µ–µ ‚Üí</button>
                </div>
            </div>
            
            <!-- –®–∞–≥ 4: –õ–æ–∫–∞—Ü–∏—è -->
            <div class="step" id="step4">
                <h2>üìç –õ–æ–∫–∞—Ü–∏—è</h2>
                <div class="form-group">
                    <label for="location">–ê–¥—Ä–µ—Å –∏–ª–∏ —Ä–∞–π–æ–Ω:</label>
                    <input type="text" id="location" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –≥. –ë–∏—à–∫–µ–∫, —É–ª. –ß—É–π, 123">
                </div>
                <div class="navigation">
                    <button class="btn" onclick="prevStep()">‚Üê –ù–∞–∑–∞–¥</button>
                    <button class="btn" onclick="nextStep()">–î–∞–ª–µ–µ ‚Üí</button>
                </div>
            </div>
            
            <!-- –®–∞–≥ 5: –§–æ—Ç–æ -->
            <div class="step" id="step5">
                <h2>üì∏ –§–æ—Ç–æ</h2>
                <div class="form-group">
                    <label>–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ (–¥–æ 5):</label>
                    <input type="file" id="photoInput" accept="image/*" multiple style="margin-bottom: 10px;">
                    <div class="photo-preview" id="photoPreview"></div>
                </div>
                <div class="navigation">
                    <button class="btn" onclick="prevStep()">‚Üê –ù–∞–∑–∞–¥</button>
                    <button class="btn" onclick="nextStep()">–î–∞–ª–µ–µ ‚Üí</button>
                </div>
            </div>
            
            <!-- –®–∞–≥ 6: –ü—Ä–µ–≤—å—é -->
            <div class="step" id="step6">
                <h2>üëÅÔ∏è –ü—Ä–µ–≤—å—é</h2>
                <div id="previewContent" style="background: #f9f9f9; padding: 15px; border-radius: 8px; margin-bottom: 20px;"></div>
                <button class="btn" id="submitBtn" onclick="submitForm()">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</button>
                <div class="navigation">
                    <button class="btn" onclick="prevStep()">‚Üê –ù–∞–∑–∞–¥</button>
                    <button class="btn" onclick="submitForm()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
            </div>
            
            <!-- –®–∞–≥ 7: –£—Å–ø–µ—Ö -->
            <div class="step" id="step7">
                <div style="text-align: center; padding: 20px;">
                    <h2 style="color: green;">‚úÖ –£—Å–ø–µ—à–Ω–æ!</h2>
                    <p id="successMessage" style="margin: 20px 0;"></p>
                    <button class="btn" onclick="closeApp()">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            </div>
            
            <!-- –®–∞–≥ 8: –û—à–∏–±–∫–∞ -->
            <div class="step" id="step8">
                <div style="text-align: center; padding: 20px;">
                    <h2 style="color: red;">‚ùå –û—à–∏–±–∫–∞</h2>
                    <p id="errorMessage" style="margin: 20px 0;"></p>
                    <button class="btn" onclick="retry()">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞</button>
                    <button class="btn" onclick="closeApp()" style="background: #777; margin-top: 10px;">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let tg = window.Telegram.WebApp;
        let currentStep = 1;
        let formData = {
            description: '',
            price: '',
            contact_type: 'telegram',
            contacts: '',
            location: '',
            photos: []
        };
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            tg.expand();
            tg.MainButton.hide();
            
            // –ï—Å–ª–∏ –µ—Å—Ç—å username, –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ
            if (tg.initDataUnsafe && tg.initDataUnsafe.user && tg.initDataUnsafe.user.username) {
                formData.contacts = `@${tg.initDataUnsafe.user.username}`;
                document.getElementById('telegramInfo').style.display = 'block';
                document.getElementById('telegramInfo').innerHTML = `–ë—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –≤–∞—à Telegram: @${tg.initDataUnsafe.user.username}`;
            }
            
            selectContactType('telegram');
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ
            document.getElementById('photoInput').addEventListener('change', handlePhotoUpload);
        });
        
        // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —à–∞–≥–∞–º
        function showStep(step) {
            document.querySelectorAll('.step').forEach(el => el.classList.remove('active'));
            document.getElementById(`step${step}`).classList.add('active');
            currentStep = step;
            
            if (step === 6) {
                updatePreview();
            }
        }
        
        function nextStep() {
            if (!validateStep(currentStep)) return;
            
            saveCurrentStep();
            
            if (currentStep < 6) {
                showStep(currentStep + 1);
            }
        }
        
        function prevStep() {
            if (currentStep > 1) {
                showStep(currentStep - 1);
            }
        }
        
        // –í–∞–ª–∏–¥–∞—Ü–∏—è
        function validateStep(step) {
            switch(step) {
                case 1:
                    const desc = document.getElementById('description').value.trim();
                    if (desc.length < 10) {
                        showNotification('–û—à–∏–±–∫–∞', '–û–ø–∏—Å–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 10 —Å–∏–º–≤–æ–ª–æ–≤', 'error');
                        return false;
                    }
                    break;
                case 2:
                    const price = document.getElementById('price').value.trim();
                    if (!price) {
                        showNotification('–û—à–∏–±–∫–∞', '–í–≤–µ–¥–∏—Ç–µ —Ü–µ–Ω—É', 'error');
                        return false;
                    }
                    break;
                case 3:
                    if (formData.contact_type === 'phone') {
                        const phone = document.getElementById('phone').value.trim();
                        if (!phone) {
                            showNotification('–û—à–∏–±–∫–∞', '–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞', 'error');
                            return false;
                        }
                    }
                    break;
                case 4:
                    const location = document.getElementById('location').value.trim();
                    if (!location) {
                        showNotification('–û—à–∏–±–∫–∞', '–í–≤–µ–¥–∏—Ç–µ –ª–æ–∫–∞—Ü–∏—é', 'error');
                        return false;
                    }
                    break;
            }
            return true;
        }
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —à–∞–≥–∞
        function saveCurrentStep() {
            switch(currentStep) {
                case 1:
                    formData.description = document.getElementById('description').value.trim();
                    break;
                case 2:
                    formData.price = document.getElementById('price').value.trim();
                    break;
                case 3:
                    if (formData.contact_type === 'phone') {
                        formData.contacts = document.getElementById('phone').value.trim();
                    }
                    break;
                case 4:
                    formData.location = document.getElementById('location').value.trim();
                    break;
            }
        }
        
        // –í—ã–±–æ—Ä —Ç–∏–ø–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞
        function selectContactType(type) {
            formData.contact_type = type;
            
            if (type === 'telegram') {
                document.getElementById('btnTelegram').style.background = '#0088cc';
                document.getElementById('btnTelegram').style.color = 'white';
                document.getElementById('btnPhone').style.background = '#f0f0f0';
                document.getElementById('btnPhone').style.color = '#333';
                document.getElementById('phoneInput').style.display = 'none';
                document.getElementById('telegramInfo').style.display = 'block';
                
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º username –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å–ª–∏ –µ—Å—Ç—å
                if (tg.initDataUnsafe && tg.initDataUnsafe.user && tg.initDataUnsafe.user.username) {
                    formData.contacts = `@${tg.initDataUnsafe.user.username}`;
                    document.getElementById('telegramInfo').innerHTML = `–ë—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –≤–∞—à Telegram: @${tg.initDataUnsafe.user.username}`;
                } else {
                    formData.contacts = '';
                    document.getElementById('telegramInfo').innerHTML = '–£ –≤–∞—Å –Ω–µ—Ç username –≤ Telegram. –£–∫–∞–∂–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ username –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Telegram.';
                }
            } else {
                document.getElementById('btnPhone').style.background = '#0088cc';
                document.getElementById('btnPhone').style.color = 'white';
                document.getElementById('btnTelegram').style.background = '#f0f0f0';
                document.getElementById('btnTelegram').style.color = '#333';
                document.getElementById('phoneInput').style.display = 'block';
                document.getElementById('telegramInfo').style.display = 'none';
                formData.contacts = document.getElementById('phone').value.trim();
            }
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ
        function handlePhotoUpload(event) {
            const files = Array.from(event.target.files);
            const preview = document.getElementById('photoPreview');
            
            files.forEach(file => {
                if (formData.photos.length >= 5) {
                    showNotification('–í–Ω–∏–º–∞–Ω–∏–µ', '–ú–∞–∫—Å–∏–º—É–º 5 —Ñ–æ—Ç–æ', 'error');
                    return;
                }
                
                if (!file.type.startsWith('image/')) {
                    showNotification('–û—à–∏–±–∫–∞', '–í—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ', 'error');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    formData.photos.push(e.target.result);
                    updatePhotoPreview();
                };
                reader.readAsDataURL(file);
            });
            
            event.target.value = '';
        }
        
        function updatePhotoPreview() {
            const preview = document.getElementById('photoPreview');
            preview.innerHTML = '';
            
            formData.photos.forEach((photo, index) => {
                const div = document.createElement('div');
                div.className = 'photo-item';
                
                const img = document.createElement('img');
                img.src = photo;
                img.alt = `–§–æ—Ç–æ ${index + 1}`;
                
                const removeBtn = document.createElement('div');
                removeBtn.className = 'remove-photo';
                removeBtn.innerHTML = '√ó';
                removeBtn.onclick = () => removePhoto(index);
                
                div.appendChild(img);
                div.appendChild(removeBtn);
                preview.appendChild(div);
            });
        }
        
        function removePhoto(index) {
            formData.photos.splice(index, 1);
            updatePhotoPreview();
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–≤—å—é
        function updatePreview() {
            const preview = document.getElementById('previewContent');
            let html = `
                <p><strong>üìù –û–ø–∏—Å–∞–Ω–∏–µ:</strong><br>${formData.description || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}</p>
                <p><strong>üí∞ –¶–µ–Ω–∞:</strong> ${formData.price || '–ù–µ —É–∫–∞–∑–∞–Ω–∞'}</p>
                <p><strong>üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã:</strong> ${formData.contacts || '–ù–µ —É–∫–∞–∑–∞–Ω—ã'}</p>
                <p><strong>üìç –õ–æ–∫–∞—Ü–∏—è:</strong> ${formData.location || '–ù–µ —É–∫–∞–∑–∞–Ω–∞'}</p>
                <p><strong>üì∏ –§–æ—Ç–æ:</strong> ${formData.photos.length} —à—Ç.</p>
            `;
            preview.innerHTML = html;
        }
        
        // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã
        function submitForm() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
            if (!formData.description || formData.description.length < 10) {
                showNotification('–û—à–∏–±–∫–∞', '–û–ø–∏—Å–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 10 —Å–∏–º–≤–æ–ª–æ–≤', 'error');
                return;
            }
            
            if (!formData.price) {
                showNotification('–û—à–∏–±–∫–∞', '–í–≤–µ–¥–∏—Ç–µ —Ü–µ–Ω—É', 'error');
                return;
            }
            
            if (!formData.contacts) {
                showNotification('–û—à–∏–±–∫–∞', '–í–≤–µ–¥–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã', 'error');
                return;
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
            const btn = document.getElementById('submitBtn');
            btn.disabled = true;
            btn.innerHTML = 'üì§ –û—Ç–ø—Ä–∞–≤–∫–∞...';
            
            // –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ
            const finalData = {
                description: formData.description,
                price: formData.price,
                contact_type: formData.contact_type,
                contacts: formData.contacts,
                location: { address: formData.location || '–ù–µ —É–∫–∞–∑–∞–Ω–æ' },
                photos: formData.photos,
                timestamp: Date.now()
            };
            
            // –î–æ–±–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
                finalData.user = {
                    id: tg.initDataUnsafe.user.id,
                    first_name: tg.initDataUnsafe.user.first_name,
                    last_name: tg.initDataUnsafe.user.last_name,
                    username: tg.initDataUnsafe.user.username
                };
            }
            
            console.log('–û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö:', finalData);
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —á–µ—Ä–µ–∑ Telegram WebApp
            try {
                tg.sendData(JSON.stringify(finalData));
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É—Å–ø–µ—Ö
                setTimeout(() => {
                    document.getElementById('successMessage').innerHTML = `
                        –í–∞—à–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!<br><br>
                        ‚úÖ –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ Telegram –±–æ—Ç–∞ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏.<br><br>
                        –û–±—ä—è–≤–ª–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ –≤ –∫–∞–Ω–∞–ª–µ @flowers_kg
                    `;
                    showStep(7);
                }, 1000);
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏:', error);
                document.getElementById('errorMessage').innerHTML = `
                    –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ.<br><br>
                    –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –±–æ—Ç–∞ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.
                `;
                showStep(8);
            }
        }
        
        // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        function showNotification(title, message, type) {
            const notification = document.getElementById('notification');
            notification.innerHTML = `<strong>${title}</strong><br>${message}`;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        function retry() {
            showStep(1);
        }
        
        function closeApp() {
            tg.close();
        }
    </script>
</body>
</html>